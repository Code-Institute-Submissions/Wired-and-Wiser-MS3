{% extends "base.html" %}

{% block content %}

    <!-- Jumbrotron/background -->
    <div class="jumbotron jumbotron-fluid text-center text-white p-0 mb-0" id="book-background">
        <div class="mask"></div>
        <div class="container py-4">
            <!-- Flash messages -->
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                    <div class="flashes position-relative">
                        <h4 class="my-5">{{ message }}</h4>
                    </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            <!-- Card containing booking form -->
            <div class="card m-md-5 p-4">
                <div class="card-body">
                    <div>
                        <h1 class="display-4 mb-5"><i class="fas fa-book mr-2"></i>Book<span class="d-none d-sm-inline"> Smart Meter Install</span></h1>
                    </div>
                    <form method="POST" action="{{ url_for('book') }}">
                        <div class="fieldset">
                            <div class="form-group form-row">
                                <label for="meter_id" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Meter ID: *</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="meter_id" name="meter_id" placeholder="Meter ID (required)"  minlength="13" maxlength="13" pattern="^[0-9]{13}$" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="meter_serial_number" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Meter Serial Number: *</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="meter_serial_number" name="meter_serial_number" placeholder="Meter serial number (required)" required>
                                </div>
                            </div>
                        </div>
                        <div class="fieldset">
                            <div class="form-group form-row">
                                <label for="enter_postcode" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Enter Postcode: *</label>
                                <div id="postcode-lookup" class="justify-content-between col-12 col-md-7">
                                    <input type="text" id="opc_input" class="form-control form-control-sm text-center text-md-left" name="enter_postcode">
                                    <button type="button" id="enter_postcode" class="button green px-3 py-1"><i class="fas fa-search-location mr-2"></i>Search</button>
                                    <select></select>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="first_address_line" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">First Address Line:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="first_address_line" name="first_address_line" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="second_address_line" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Second Address Line:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="second_address_line" name="second_address_line" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="third_address_line" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Third Address Line:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="third_address_line" name="third_address_line" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="town" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Town:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="town" name="town" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="county" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">County:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="county" name="county" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="postcode" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Postcode:</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="postcode" name="postcode" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="meter_location" class="col-form-label col-form-label-sm col-12 col-md-10 offset-md-1 text-md-left">Meter Location: *</label>
                                <div class="col-12 col-md-10 offset-md-1">
                                    <textarea class="form-control form-control-sm text-left" id="meter_location" name="meter_location" cols="30" rows="2" placeholder="Where in the property is the meter located? (required)" required></textarea>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="access_instructions" class="col-form-label col-form-label-sm col-12 col-md-10 offset-md-1 text-md-left">Access Instructions (if applicable):</label>
                                <div class="col-12 col-md-10 offset-md-1">
                                    <textarea class="form-control form-control-sm text-left" id="access_instructions" name="access_instructions" cols="30" rows="2" placeholder="Are there any instructions for accessing the property?"></textarea>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="parking_on_site" class="col-form-label col-form-label-sm col-12 col-sm-6 offset-md-1 text-sm-left">Parking Available On Site?: *</label>
                                <div class="col-12 col-sm-6 col-md-4">
                                    <select name="parking_on_site" class="custom-select custom-select-sm text-center text-md-left" id="parking_on_site" required>
                                        <option value="" selected disabled>Select (required)</option>
                                        <option value="yes">Yes</option>
                                        <option value="no">No</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="property_type" class="col-form-label col-form-label-sm col-12 col-sm-6 offset-md-1 text-sm-left">Property Type: *</label>
                                <div class="col-12 col-sm-6 col-md-4">
                                    <select name="property_type" class="custom-select custom-select-sm text-center text-md-left" id="property_type" required>
                                        <option value="" selected disabled>Select (required)</option>
                                        <option value="residential">Residential</option>
                                        <option value="commercial">Commercial</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="fieldset">
                            <div class="form-group form-row">
                                <label for="supplier" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Supplier: *</label>
                                <div class="col-12 col-md-7">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="supplier" name="supplier" placeholder="Name of current supplier" required>
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="supplier_acc_no" class="col-form-label col-form-label-sm col-12 col-md-5 offset-md-1 text-md-left">Supplier Account Number:</label>
                                <div class="col-12 col-md-5">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="supplier_acc_no" name="supplier_acc_no" placeholder="Account number (if known)">
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="meter_read_reg_1" class="col-form-label col-form-label-sm col-12 col-md-5 offset-md-1 text-md-left">Meter Read (Register 1):</label>
                                <div class="col-12 col-md-5">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="meter_read_reg_1" name="meter_read_reg_1" pattern="^[0-9]{8}$" placeholder="Register 1 read (if known)">
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="meter_read_reg_2" class="col-form-label col-form-label-sm col-12 col-md-5 offset-md-1 text-md-left">Meter Read (Register 2):</label>
                                <div class="col-12 col-md-5">
                                    <input type="text" class="form-control form-control-sm text-center text-md-left" id="meter_read_reg_2" name="meter_read_reg_2" pattern="^[0-9]{8}$" placeholder="Register 2 read (if known)">
                                </div>
                            </div>
                            <div class="form-group form-row">
                                <label for="install_date" class="col-form-label col-form-label-sm col-12 col-md-3 offset-md-1 text-md-left">Installation Date: *</label>
                                <div class="col-12 col-md-7">
                                    <input type="date" class="form-control form-control-sm text-center text-md-left" id="install_date" name="install_date" required>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5">
                            <button type="submit" class="button green px-3 py-1 d-block d-md-inline mx-auto mb-4 mb-md-0 mr-md-4"><i class="fas fa-book mr-2"></i>Book</button>
                            <a href="{{ url_for('account', username=session['user_email_address']) }}" class="button red d-md-inline px-3 py-1">
                                <i class="fas fa-window-close mr-2"></i>Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block scripts %}

    <!-- Script for Address Lookup:  https://getaddress.io/ -->
    <script src="https://cdn.getaddress.io/scripts/jquery.getAddress-4.0.0.min.js"></script>

{% endblock %}
